<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="format-detection" content="telephone=no" />
<meta name="robots" content="index, follow">
<meta name="author" content="Wira Dwi Susanto">
<title>Flask Rest Client</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<link href="https://api.kmsp-store.com/api/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
</head>
<body>
<script type="text/javascript">
var cekBearer = window.localStorage.getItem('accessTokenRestPython_920');

if(cekBearer == null || cekBearer == "")
{
  window.location.href='home';
}
</script>
<style type="text/css">
/* Absolute Center Spinner */
.loading {
  position: fixed;
  z-index: 999;
  height: 2em;
  width: 2em;
  overflow: visible;
  margin: auto;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

/* Transparent Overlay */
.loading:before {
  content: '';
  display: block;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.3);
}

/* :not(:required) hides these rules from IE9 and below */
.loading:not(:required) {
  /* hide "loading..." text */
  font: 0/0 a;
  color: transparent;
  text-shadow: none;
  background-color: transparent;
  border: 0;
}

.loading:not(:required):after {
  content: '';
  display: block;
  font-size: 10px;
  width: 1em;
  height: 1em;
  margin-top: -0.5em;
  -webkit-animation: spinner 1500ms infinite linear;
  -moz-animation: spinner 1500ms infinite linear;
  -ms-animation: spinner 1500ms infinite linear;
  -o-animation: spinner 1500ms infinite linear;
  animation: spinner 1500ms infinite linear;
  border-radius: 0.5em;
  -webkit-box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.5) -1.5em 0 0 0, rgba(0, 0, 0, 0.5) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
  box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) -1.5em 0 0 0, rgba(0, 0, 0, 0.75) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
}

/* Animation */

@-webkit-keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@-moz-keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@-o-keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@keyframes spinner {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
</style>
<script type="text/javascript">
var sha256 = function sha256(ascii) {
  function rightRotate(value, amount) {
    return (value>>>amount) | (value<<(32 - amount));
  };

  var mathPow = Math.pow;
  var maxWord = mathPow(2, 32);
  var lengthProperty = 'length'
  var i, j;
  var result = ''

  var words = [];
  var asciiBitLength = ascii[lengthProperty]*8;

  var hash = sha256.h = sha256.h || [];

  var k = sha256.k = sha256.k || [];
  var primeCounter = k[lengthProperty];

  var isComposite = {};
  for (var candidate = 2; primeCounter < 64; candidate++) {
    if (!isComposite[candidate]) {
      for (i = 0; i < 313; i += candidate) {
        isComposite[i] = candidate;
      }
      hash[primeCounter] = (mathPow(candidate, .5)*maxWord)|0;
      k[primeCounter++] = (mathPow(candidate, 1/3)*maxWord)|0;
    }
  }

  ascii += '\x80'
  while (ascii[lengthProperty]%64 - 56) ascii += '\x00'
  for (i = 0; i < ascii[lengthProperty]; i++) {
    j = ascii.charCodeAt(i);
    if (j>>8) return;
    words[i>>2] |= j << ((3 - i)%4)*8;
  }
  words[words[lengthProperty]] = ((asciiBitLength/maxWord)|0);
  words[words[lengthProperty]] = (asciiBitLength)

  for (j = 0; j < words[lengthProperty];) {
    var w = words.slice(j, j += 16)
    var oldHash = hash;
    hash = hash.slice(0, 8);

    for (i = 0; i < 64; i++) {
      var i2 = i + j;
      var w15 = w[i - 15], w2 = w[i - 2];

      var a = hash[0], e = hash[4];
      var temp1 = hash[7]
        + (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25))
        + ((e&hash[5])^((~e)&hash[6])) // ch
        + k[i]

        + (w[i] = (i < 16) ? w[i] : (
            w[i - 16]
            + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15>>>3))
            + w[i - 7]
            + (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2>>>10))
          )|0
        );

      var temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22))
        + ((a&hash[1])^(a&hash[2])^(hash[1]&hash[2]));

      hash = [(temp1 + temp2)|0].concat(hash);
      hash[4] = (hash[4] + temp1)|0;
    }

    for (i = 0; i < 8; i++) {
      hash[i] = (hash[i] + oldHash[i])|0;
    }
  }

  for (i = 0; i < 8; i++) {
    for (j = 3; j + 1; j--) {
      var b = (hash[i]>>(j*8))&255;
      result += ((b < 16) ? 0 : '') + b.toString(16);
    }
  }
  return result;
};
</script>
<div class="container" style="margin-top: 100px; margin-bottom: 100px;">
<div class="loading" name="loading" id="loading" style="display: none;">Loading&#8230;</div>
<h4 name="welcomeText" id="welcomeText"><b>Selamat Datang,</b></h4>
<button type="button" class="btn btn-danger" name="buttonLogoutAkun" id="buttonLogoutAkun"><i class="fa fa-reply" aria-hidden="true"></i> Logout</button><br><br>
<ul class="nav nav-tabs" role="tablist">
  <li class="nav-item">
    <a class="nav-link listTab" href="#lihat" role="tab" data-toggle="tab" data-id="1">Lihat</a>
  </li>
  <li class="nav-item">
    <a class="nav-link listTab" href="#tambah" role="tab" data-toggle="tab" data-id="2">Tambah</a>
  </li>
  <li class="nav-item">
    <a class="nav-link listTab" href="#edit" role="tab" data-toggle="tab" data-id="3">Edit</a>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div role="tabpanel" class="tab-pane fade in active" id="lihat">
    <br>
    <h2>Daftar Aktivitas Saya</h2>
  <p>Menampilkan daftar aktivitas saya:</p>
  <div style="overflow-x:auto;">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID Aktivitas</th>
        <th>Nama Aktivitas</th>
        <th>Mulai</th>
        <th>Selesai</th>
        <th>Status</th>
        <th>Hapus</th>
      </tr>
    </thead>
    <tbody name="listhasiltable" id="listhasiltable">
    </tbody>
  </table>
</div>
  </div>
  <div role="tabpanel" class="tab-pane fade" id="tambah">
  <form name="formInputAktivitas" id="formInputAktivitas">
  <br>
  <h3><b>Tambahkan Aktivitas</b></h3>
    <div class="form-group">
      <label for="nama_aktivitas">Nama Aktivitas:</label>
      <input type="text" class="form-control" placeholder="Nama Aktivitas..." value="" name="nama_aktivitas" id="nama_aktivitas" maxlength="64">
    </div>
    <div class="form-group">
      <label for="start_plan">Tanggal Target Mulai:</label>
      <input type="date" class="form-control" placeholder="Tanggal Target Mulai..." value="" name="start_plan" id="start_plan">
    </div>
    <div class="form-group">
      <label for="start_plan_jam">Jam Target Mulai:</label>
      <input type="time" class="form-control" placeholder="Jam Target Mulai..." value="" name="start_plan_jam" id="start_plan_jam">
    </div>
    <div class="form-group">
      <label for="end_plan">Tanggal Target Selesai:</label>
      <input type="date" class="form-control" placeholder="Tanggal Target Selesai..." value="" name="end_plan" id="end_plan">
    </div>
    <div class="form-group">
      <label for="end_plan_jam">Jam Target Selesai:</label>
      <input type="time" class="form-control" placeholder="Jam Target Selesai..." value="" name="end_plan_jam" id="end_plan_jam">
    </div>
    <select class="form-control" name="status" id="status">
    <option value="0">Belum Dilaksanakan</option>
    <option value="1">Proses</option>
    <option value="2">Sudah Dilaksanakan</option>
    </select>
    <br>
    <button type="button" name="buttonAddAktivitas" id="buttonAddAktivitas" class="btn btn-primary"><i class="fa fa-sign-in" aria-hidden="true"></i> Tambah Aktivitas</button><br><br>
  </form>
  </div>
  <div role="tabpanel" class="tab-pane fade" id="edit">
  <form name="formEditAktivitas" id="formEditAktivitas">
  <br>
  <h3><b>Edit Aktivitas</b></h3>
   <div class="form-group">
      <label for="id_aktivitas_edit">ID Aktivitas (cek di tab Lihat):</label>
      <input type="number" class="form-control" placeholder="ID Aktivitas..." value="" name="id_aktivitas_edit" id="id_aktivitas_edit" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" maxlength="16">
    </div>
    <div class="form-group">
      <label for="nama_aktivitas_edit">Nama Aktivitas:</label>
      <input type="text" class="form-control" placeholder="Nama Aktivitas..." value="" name="nama_aktivitas_edit" id="nama_aktivitas_edit" maxlength="64">
    </div>
    <div class="form-group">
      <label for="start_plan_edit">Tanggal Target Mulai:</label>
      <input type="date" class="form-control" placeholder="Tanggal Target Mulai..." value="" name="start_plan_edit" id="start_plan_edit">
    </div>
    <div class="form-group">
      <label for="start_plan_jam_edit">Jam Target Mulai:</label>
      <input type="time" class="form-control" placeholder="Jam Target Mulai..." value="" name="start_plan_jam_edit" id="start_plan_jam_edit">
    </div>
    <div class="form-group">
      <label for="end_plan_edit">Tanggal Target Selesai:</label>
      <input type="date" class="form-control" placeholder="Tanggal Target Selesai..." value="" name="end_plan_edit" id="end_plan_edit">
    </div>
    <div class="form-group">
      <label for="end_plan_jam_edit">Jam Target Selesai:</label>
      <input type="time" class="form-control" placeholder="Jam Target Selesai..." value="" name="end_plan_jam_edit" id="end_plan_jam_edit">
    </div>
    <select class="form-control" name="status_edit" id="status_edit">
    <option value="0">Belum Dilaksanakan</option>
    <option value="1">Proses</option>
    <option value="2">Sudah Dilaksanakan</option>
    </select>
    <br>
    <button type="button" name="buttonEditAktivitas" id="buttonEditAktivitas" class="btn btn-primary"><i class="fa fa-sign-in" aria-hidden="true"></i> Edit Aktivitas</button><br><br>
  </form>
  </div>
</div>
<hr>
<center><b>Created By: Wira Dwi Susanto (NIM: 17.01.53.0053)</b></center>
</div>
<script type="text/javascript">
$(document).ready(function(){
$.ajax({
        type:'GET',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/check_login",
        data:{},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        refreshToken();
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
            refreshToken();
          }

          if(s['code'] == "00")
          {
            welcomeText();
            $('#loading').css('display', 'none');
          }
        }
        });

function refreshToken()
{
  var refresh_token = window.localStorage.getItem('refreshTokenRestPython_920');
  $.ajax({
        type:'PATCH',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/update_token",
        data:{refresh_token:refresh_token},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        window.location.href='home';
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            window.location.href='home';
            $('#loading').css('display', 'none');
          }

          if(s['code'] == "00")
          {
            window.localStorage.setItem('accessTokenRestPython_920', s['new_access_token']);
            welcomeText();
            $('#loading').css('display', 'none');
          }
        }
        });
}

function welcomeText()
{
  $.ajax({
        type:'GET',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/home_dashboard",
        data:{},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        checkLogin();
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
          }

          if(s['code'] == "00")
          {
            $('#welcomeText').html('<b>Selamat Datang, ' + s['nama_lengkap'] + '</b>');
            $('#loading').css('display', 'none');
          }
        }
        });
}

$(document).on('click', '.listTab', function(){
   var data = $(this).data();
   var getId = data.id;

   if(getId == 1)
   {
      checkLogin();
      getActivity();
   }
});

$(document).on('click', '.aktivitasList', function(){
   var data = $(this).data();
   var getId = data.id;

  var konfirmasiText1 = confirm("Apakah Anda yakin ingin menghapus data aktivitas ini?");
  if(konfirmasiText1 === true)
  {
   $.ajax({
        type:'DELETE',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/delete_activity/" + getId,
        data:{},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        $('#loading').css('display', 'none');
        checkLogin();
        //alert("Terjadi masalah saat menampilkan data aktivitas. Barangkali coba logout kemudian login kembali.");
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
            alert(s['message']);
          }

          if(s['code'] == "00")
          {
            //SUKSES
            $('#loading').css('display', 'none');
            getActivity();
            alert(s['message']);
          }
        }
        });
  }
});

$('#buttonLogoutAkun').click(function(){
var konfirmasiText1 = confirm("Apakah Anda yakin ingin logout?");
if(konfirmasiText1 === true)
{
$.ajax({
        type:'GET',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/logout",
        data:{},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        $('#loading').css('display', 'none');
        checkLogin();
        //alert("Terjadi masalah saat logout akun. Silakan coba lagi!");
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
            alert(s['message']);
          }

          if(s['code'] == "00")
          {
            //SUKSES
            window.localStorage.setItem('accessTokenRestPython_920', "");
            window.localStorage.setItem('refreshTokenRestPython_920', "");
            $('#loading').css('display', 'none');
            alert(s['message']);
            window.location.href = 'home';
          }
        }
        });
}
});

$('#buttonAddAktivitas').click(function(){
var nama_aktivitas = $('#nama_aktivitas').val();
var start_plan = $('#start_plan').val();
var start_plan_jam = $('#start_plan_jam').val();
var end_plan = $('#end_plan').val();
var end_plan_jam = $('#end_plan_jam').val();
var status_plan = $('#status').val();
var cvUnixTimestamp1 = new Date(start_plan + ' ' + start_plan_jam).getTime() / 1000;
var cvUnixTimestamp2 = new Date(end_plan + ' ' + end_plan_jam).getTime() / 1000;
var cv1 = cvUnixTimestamp1.toLocaleString('en-US', {timeZone: 'Asia/Jakarta'});
var cv2 = cvUnixTimestamp2.toLocaleString('en-US', {timeZone: 'Asia/Jakarta'});
var cv1confirm = cv1.replace(/,/g,'');
var cv2confirm = cv2.replace(/,/g,'');

if(nama_aktivitas == "")
{
  alert("Nama Aktivitas Mohon Diisi!");
  return false;
}

if(isNaN(cvUnixTimestamp1) == true || isNaN(cvUnixTimestamp2) == true)
{
  alert("Isi terlebih dahulu tanggal dan waktunya!");
  return false;
}

if(isNaN(cvUnixTimestamp1) == false && isNaN(cvUnixTimestamp2) == false)
{
  addActivity(nama_aktivitas, cv1confirm, cv2confirm, status_plan);
}
});

$('#buttonEditAktivitas').click(function(){
var id_aktivitas_edit = $('#id_aktivitas_edit').val();
var nama_aktivitas_edit = $('#nama_aktivitas_edit').val();
var start_plan_edit = $('#start_plan_edit').val();
var start_plan_jam_edit = $('#start_plan_jam_edit').val();
var end_plan_edit = $('#end_plan_edit').val();
var end_plan_jam_edit = $('#end_plan_jam_edit').val();
var status_plan_edit = $('#status_edit').val();
var cvUnixTimestamp1_edit = new Date(start_plan_edit + ' ' + start_plan_jam_edit).getTime() / 1000;
var cvUnixTimestamp2_edit = new Date(end_plan_edit + ' ' + end_plan_jam_edit).getTime() / 1000;
var cv1_edit = cvUnixTimestamp1_edit.toLocaleString('en-US', {timeZone: 'Asia/Jakarta'});
var cv2_edit = cvUnixTimestamp2_edit.toLocaleString('en-US', {timeZone: 'Asia/Jakarta'});
var cv1confirm_edit = cv1_edit.replace(/,/g,'');
var cv2confirm_edit = cv2_edit.replace(/,/g,'');

if(id_aktivitas_edit == "" || nama_aktivitas_edit == "")
{
  alert("ID atau Nama Aktivitas Mohon Diisi!");
  return false;
}

if(isNaN(cvUnixTimestamp1_edit) == true || isNaN(cvUnixTimestamp2_edit) == true)
{
  alert("Isi terlebih dahulu tanggal dan waktunya!");
  return false;
}

if(isNaN(cvUnixTimestamp1_edit) == false && isNaN(cvUnixTimestamp2_edit) == false)
{
  editActivity(id_aktivitas_edit, nama_aktivitas_edit, cv1confirm_edit, cv2confirm_edit, status_plan_edit);
}
});

function checkLogin()
{
  $.ajax({
        type:'GET',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/check_login",
        data:{},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        refreshToken();
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
            refreshToken();
          }

          if(s['code'] == "00")
          {
            $('#loading').css('display', 'none');
          }
        }
        });
}

function getActivity()
{
  welcomeText();
  $('#listhasiltable').html('');
  $.ajax({
        type:'GET',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/get_activity",
        data:{},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        $('#loading').css('display', 'none');
        checkLogin();
        //alert("Terjadi masalah saat menampilkan data aktivitas. Barangkali coba logout kemudian login kembali.");
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
            alert("Terjadi masalah saat menampilkan data aktivitas. Barangkali coba logout kemudian login kembali.");
          }

          if(s['code'] == "00")
          {
            var getidnya = 0;
            for(var a = 0; a < s['data'].length; a++)
            {
              getidnya = parseInt(s['data'][a]['id']);
              $('#listhasiltable').append('<tr><td>' + s['data'][a]['id'] + '</td><td>' + s['data'][a]['nama_aktivitas'] + '</td><td>' + s['data'][a]['real_start_plan']  + '</td><td>' + s['data'][a]['real_end_plan'] + '</td><td>' + s['data'][a]['status_text'] + '</td><td class="aktivitasList" style="cursor: pointer;" data-id="' + getidnya +'"><i class="fa fa-trash-o" aria-hidden="true"></i> Hapus</td></tr>');
            }
            $('#loading').css('display', 'none');
          }
        }
        });
}

function addActivity(getNamaAktivitas, getStartPlan, getEndPlan, getStatusPlan)
{
  $.ajax({
        type:'POST',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/add_activity",
        data:{nama_aktivitas:getNamaAktivitas, start_plan:getStartPlan, end_plan:getEndPlan, status:getStatusPlan},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        $('#loading').css('display', 'none');
        checkLogin();
        alert("Terjadi masalah saat menambahkan data aktivitas. Barangkali coba logout kemudian login kembali.");
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
            alert(s['message']);
          }

          if(s['code'] == "00")
          {
            //SUKSES
            $('#loading').css('display', 'none');
            alert(s['message']);
          }
        }
        });
}

function editActivity(getIdAktivitas, getNamaAktivitas, getStartPlan, getEndPlan, getStatusPlan)
{
  $.ajax({
        type:'PUT',
        crossDomain: true,
        url: "https://wirauhuy123.pythonanywhere.com/api/v1/update_activity/" + getIdAktivitas,
        data:{nama_aktivitas:getNamaAktivitas, start_plan:getStartPlan, end_plan:getEndPlan, status:getStatusPlan},
        'contentType': 'application/x-www-form-urlencoded',
        error:function(xhr, ajaxOptions, thrownError){
        $('#loading').css('display', 'none');
        checkLogin();
        alert("Terjadi masalah saat mengedit data aktivitas. Barangkali coba logout kemudian login kembali.");
        },
        cache:false,
        beforeSend:function(request){
        request.setRequestHeader("Authorization", "Bearer " + window.localStorage.getItem('accessTokenRestPython_920'));
        request.setRequestHeader("clientId", "b09218e436dd137d454d3d54488108e1");
        $('#loading').css('display', 'inline-block');
        },
        success:function(s){
          if(s['code'] == "01")
          {
            //GAGAL
            $('#loading').css('display', 'none');
            alert(s['message']);
          }

          if(s['code'] == "00")
          {
            //SUKSES
            $('#loading').css('display', 'none');
            alert(s['message']);
          }
        }
        });
}
});
</script>
</body>
</html>